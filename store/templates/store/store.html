{%extends 'base.html'%}{%load static%}
{%block content%}
<main class="container-fluid">
    <div class="shop-page-header my-5">
        <div class="shop-archive-heading">
            <h1>Our Shop</h1>
        </div>
    </div>

    <div class="row flex-row-reverse">
        <div class="col-lg-9">
            <div class="shop-product-filter">
                <p>We found <strong class="text-brand">{{num_products}}</strong> items for you!</p>
                <!-- <div class="sort-search-product-area">
                </div> -->
            </div>
            <div class="row">
                {%if products %}
                {%for product in products%}
                <div class="col-lg-3 col-sm-6 col-6">
                    <div class="product-cart-wrap mb-4">
                        <div class="product-img-action-wrap">
                            <div class="product-img product-img-zoom">
                                <a href="{{product.get_product_url}}">
                                    <img src="{{product.image.url}}" class="img-responsive" width='250px' alt="">
                                    <!-- <img src="{%static ''%}img/3.jpg" class="img-responsive" alt=""> -->
                                </a>
                            </div>
                        </div>
                        <div class="product-content-wrap">
                            <div class="product-category"><a href="{{product.category.get_productscategory_url}}">{{product.category}}</a></div>
                            <h2><a href="{{product.get_product_url}}">{{product.product_name}}</a></h2>
                            <div class="product-rate-cover">
                                <div class="product-rate d-inline-block">Rating stars</div>
                            </div>
                            <div><span class="font-small text-muted">By <a href="{{product.vendor.get_vendor_url}}">{{product.vendor}}</a></span> </div>
                            <div class="product-card-bottom">
                                <div class="product-price">
                                    <span>GH¢{{product.price}}</span>
                                    <!-- <span class="old-price">GH¢14.20</span> -->
                                </div>
                                <div class="add-cart">
                                    <a href="{% url 'add_cart' product.id %}" class="add"> <i class="fas fa-shopping-cart"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {%endfor%}
                {%else%}
                <div>
                    <h2 class="text-warning">No results found.Please check your search keywords</h2>
                </div>
                {%endif%}
            </div>
            <!-- pagination -->
            <nav aria-label="...">
                {% if products.has_other_pages %}
                <ul class="pagination">
                    {%if products.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{products.previous_page_number}}">
                            <i class="fa fa-angle-left"></i>
                            <span class="sr-only">Previous</span>
                        </a>
                    </li>
                    {%else%}
                    <li class="page-item disabled">
                        <a class="page-link" href="#">
                            <i class="fa fa-angle-left"></i>
                            <span class="sr-only">Previous</span>
                        </a>
                    </li>
                    {%endif%}

                    {% for i in products.paginator.page_range %}
                    {%if products.number == i %}
                    <li class="page-item active">
                        <a class="page-link" href="#">{{i}} <span class="sr-only">(current)</span></a>
                    </li>
                    {%else%}
                    <li class="page-item">
                        <a class="page-link" href="?page={{i}}">{{i}}</a>
                    </li> 
                    {%endif%}
                    {%endfor%}

                    {%if products.has_next%}
                    <li class="page-item">
                        <a class="page-link" href="?page={{products.next_page_number}}">
                            <i class="fa fa-angle-right"></i>
                            <span class="sr-only">Next</span>
                        </a>
                    </li>
                    {%else%}
                    <li class="page-item disabled">
                        <a class="page-link" href="#">
                            <i class="fa fa-angle-right"></i>
                            <span class="sr-only">Next</span>
                        </a>
                    </li>
                    {%endif%}
                </ul>
                {%endif%}
            </nav>
        </div>
        <div class="col-lg-3">
            <div class=" sidebar-widget widget-category">
                <h5>Category</h5>
                <ul class="p-0">
                    <li>
                        <a href="{%url 'store'%}">
                            <img src="{%static '/img/category-1.svg'%}" alt="">All Products</a>
                        <!-- <span class="count">4</span> -->
                    </li>
                    {% for category in links%}
                    <li>
                        <a href="{{category.get_productscategory_url}}">
                            <img src="{{category.image.url}}" width="40px" alt="">{{category.category_name}}</a>
                        <!-- <span class="count">4</span> -->
                    </li>
                    {%endfor%}
                </ul>
            </div>
        </div>
    </div>

</main>

{%endblock%}